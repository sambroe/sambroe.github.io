<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Sam Broe</title>

    <!-- Bootstrap -->
    <!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->
    <link href='http://fonts.googleapis.com/css?family=Raleway:900,400,200' rel='stylesheet' type='text/css'>
    <link href="assets/css/normalize.css" rel="stylesheet">
    <link href="assets/css/main.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link href="favicon.ico" type="image/x-icon" rel="icon">
    <link href="favicon.ico" type="image/x-icon" rel="shortcut icon">
  </head>
  <body>
    <div id="bg-container"></div>
    <h1 id="name" data-in-effect="rollIn">Sam <img src="assets/img/logo.png" alt="" id="logo"/> Broe</h1>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- <script src="assets/js/jquery.textillate.js"></script> -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- <script src="js/bootstrap.min.js"></script> -->

    <script type="text/javascript">

      $(function ()
      {
        var $bgImg = $('<img>');
        var bgImg = $bgImg[0];
        var $bgContainer = $('#bg-container');
        var $window = $(window);

        bgImg.onload = function ()
        {
          $bgContainer.fadeIn(5000);
          $window.resize();
        }
        bgImg.src = 'assets/img/bg.jpg';

        $bgContainer.append($bgImg);

        $window.resize(function ()
        {
          var w, h, x, y, windowWidth = $window.width(), windowHeight = $window.height();
          var wH = windowWidth / windowHeight;
          var hW = windowHeight / windowWidth;
          var imageAspectRatio = $bgImg.width()/$bgImg.height();
          var imageAspectRatioInverse = $bgImg.height()/$bgImg.width();

          if (wH > imageAspectRatio)
          {
            w = windowWidth;
            h = windowWidth * imageAspectRatioInverse;
            x = (windowWidth - w) / 2;
            y = (windowHeight - h) / 2;
          }
          else
          {
            h = windowHeight;
            w = windowHeight * imageAspectRatio;
            x = (windowWidth - w) / 2;
            y = (windowHeight - h) / 2;
          }

          $bgImg.css({
            width: w + 'px',
            height: h + 'px',
            top: y + 'px',
            left: x + 'px'
          });

          var skyRatio = 780/2340;
          var skyHeight = skyRatio*h;
          var visibleSky = skyHeight + y;
          var nameHeight = Math.max(visibleSky, 100);
          var $name = $('#name');
          var $nameImg = $name.find('img');

          $name.css(
          {
            height: nameHeight + 'px',
            lineHeight: nameHeight + 'px',
          })

          _.defer(_.bind(function ()
          {
            $name.css(
            {
              fontSize: ($nameImg.height()*.40) + 'px'
            });
          },
          this));

        });
      });

    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-2051541-3', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
